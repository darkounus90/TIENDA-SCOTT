<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <title>Grupo Empresarial El Pedalazo - Tienda de Bicicletas</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" type="image/svg+xml" href="favicon.svg">
  <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
  <link rel="stylesheet" href="style.css?v=14.3.0" />
  <!-- Lucide Icons -->
  <script src="https://unpkg.com/lucide@latest"></script>
  <!-- Google Identity Services -->
  <script src="https://accounts.google.com/gsi/client" async defer></script>

  <script>
    // GLOBAL ERROR TRAP - Para depuraci√≥n en producci√≥n
    window.onerror = function (msg, url, line, col, error) {
      // Ignorar errores de extensiones o irrelevantes
      if (msg.includes('extension') || msg.includes('script error')) return;

      const box = document.createElement('div');
      box.style.cssText = "position:fixed; top:0; left:0; width:100%; z-index:99999; background:red; color:white; padding:10px; font-family:monospace;";
      box.innerHTML = "<strong>‚ö†Ô∏è JS ERROR:</strong> " + msg + "<br><small>" + url + ":" + line + "</small>";
      document.body.appendChild(box);
      return false;
    };

    window.addEventListener('unhandledrejection', function (event) {
      console.error("Unhandled Rejection:", event.reason);
      // Opcional: mostrar en pantalla si es cr√≠tico
    });
  </script>

</head>

<body>
  <!-- CABECERA -->
  <header class="header">
    <div class="container header__content">
      <div class="logo">
        <a href="#home" style="text-decoration: none; display: flex; align-items: center;">
          <img src="logo-pedalazo-icon.svg" alt="El Pedalazo" style="height: 50px; width: auto;">
          <span
            style="font-size: 2rem; font-weight: 800; color: white; margin-left: -10px; letter-spacing: -1px; font-family: 'Inter', sans-serif;">edalazo</span>
        </a>
      </div>

      <nav class="nav" id="mainNav">
        <a href="#home">Inicio</a>
        <a href="#categorias">Categor√≠as</a>
        <a href="#productos">Productos</a>
        <a href="cars.html" class="nav-highlight">
          Para tu carro!
          <span class="nav-badge">NEW</span>
        </a>
        <a href="#servicios">Servicios</a>
        <a href="#contacto">Contacto</a>
      </nav>

      <div class="header__actions">
        <button class="btn-icon" id="searchToggle"><i data-lucide="search"></i></button>
        <button class="btn-icon" id="cartButton">
          <i data-lucide="shopping-bag"></i> <span id="cartCount">0</span>
        </button>
        <div class="user-menu-container">
          <button class="btn-icon" id="loginButton" title="Iniciar Sesi√≥n"><i data-lucide="user"></i></button>
          <button class="btn-icon" id="accountButton" style="display:none;" title="Mi Cuenta"><i
              data-lucide="user"></i></button>

          <!-- Dropdown Menu -->
          <div class="user-dropdown" id="userDropdown">
            <button id="menuProfile"><span class="icon"><i data-lucide="user"></i></span> Mi Perfil</button>
            <button id="menuOrders"><span class="icon"><i data-lucide="package"></i></span> Mis Pedidos</button>
            <div class="dropdown-divider"></div>
            <button id="menuLogout" class="text-danger"><span class="icon"><i data-lucide="log-out"></i></span> Cerrar
              Sesi√≥n</button>
          </div>
        </div>

        <!-- HAMBURGER MENU BUTTON - al final para m√≥vil -->
        <button class="hamburger-menu" id="hamburgerMenu" aria-label="Abrir men√∫">
          <span class="bar"></span>
          <span class="bar"></span>
          <span class="bar"></span>
        </button>
      </div>

      <!-- Search Input Hidden -->
      <div class="search-overlay" id="searchOverlay" style="display: none;">
        <input type="text" id="searchInput" class="search-input" placeholder="Buscar productos..." />
      </div>
    </div>
  </header>

  <!-- HERO (New Split Design) -->
  <section class="hero" id="home">
    <div class="container hero__container">
      <div class="hero__text-col">
        <span class="badge-new">Nueva Colecci√≥n 2026</span>
        <h1>PERFORMANCE <br><span class="text-gradient">SIN L√çMITES</span></h1>
        <p>Descubre la ingenier√≠a suiza m√°s avanzada. Dise√±adas para ganar, construidas para durar.</p>
        <div class="hero__btns">
          <a href="#productos" class="btn-primary">Ver Bicicletas</a>
        </div>
        <div class="hero__stats">
          <div><span>50+</span><small>Modelos</small></div>
          <div><span>12k</span><small>Clientes</small></div>
          <div><span>24h</span><small>Soporte</small></div>
        </div>
      </div>
      <div class="hero__image-col">
        <div class="glow-effect"></div>
        <img src="scott-scale-pov-real.png" alt="Vista POV Scott Scale 910 RC en acci√≥n" class="hero-pov-img">
      </div>
    </div>
  </section>

  <!-- CATEGOR√çAS -->
  <section class="section" id="categorias">
    <div class="container">
      <h2>Categor√≠as principales</h2>
      <p>Encuentra la bicicleta ideal y complementos para cada tipo de ciclismo.</p>

      <div class="grid categorias__grid">
        <article class="card categoria" data-category="mtb">
          <h3>Monta√±a (MTB)</h3>
          <p>XC, trail y enduro para dominar cualquier terreno.</p>
        </article>

        <article class="card categoria" data-category="ruta">
          <h3>Ruta</h3>
          <p>Ligereza y aerodin√°mica para largas distancias.</p>
        </article>

        <article class="card categoria" data-category="gravel">
          <h3>Gravel</h3>
          <p>Aventura y versatilidad en caminos mixtos.</p>
        </article>

        <article class="card categoria" data-category="ciudad">
          <h3>Ciudad / Urbanas</h3>
          <p>Comodidad y estilo para el d√≠a a d√≠a.</p>
        </article>

        <article class="card categoria" data-category="ebike">
          <h3>E‚ÄëBikes</h3>
          <p>Asistencia el√©ctrica para ir m√°s lejos con menos esfuerzo.</p>
        </article>

        <article class="card categoria" data-category="accesorios">
          <h3>Accesorios</h3>
          <p>Cascos, luces, herramientas, rodillos y m√°s.</p>
        </article>
      </div>
    </div>
  </section>

  <!-- PRODUCTOS -->
  <section class="section" id="productos">
    <div class="container">
      <div class="section__header">
        <h2>Productos destacados</h2>
        <select id="categoryFilter">
          <option value="all">Todas las categor√≠as</option>
          <option value="mtb">Monta√±a</option>
          <option value="ruta">Ruta</option>
          <option value="gravel">Gravel</option>
          <option value="ciudad">Ciudad</option>
          <option value="ebike">E‚ÄëBikes</option>
          <option value="accesorios">Accesorios</option>
        </select>
      </div>

      <div class="grid productos__grid" id="productList">
        <!-- JS inyecta las tarjetas de producto aqu√≠ -->
      </div>
    </div>
  </section>

  <!-- SERVICIOS / TALLER -->
  <section class="section section--alt" id="servicios">
    <div class="container servicios__content">
      <div>
        <h2>Taller especializado y servicios</h2>
        <p>
          Ofrecemos mantenimiento preventivo, reparaciones completas, ajustes de transmisi√≥n
          y servicio de suspensi√≥n para todas las marcas.
        </p>
        <ul class="servicios__list">
          <li>Mantenimiento b√°sico y avanzado.</li>
          <li>Ajuste de frenos, cambios y suspensi√≥n.</li>
          <li>Armado de bicicletas nuevas y personalizaci√≥n.</li>
          <li>Asesor√≠a para elecci√≥n de talla y tipo de bicicleta.</li>
        </ul>
      </div>
      <div class="servicios__box">
        <h3>Agenda tu servicio</h3>
        <form id="serviceForm">
          <label>
            Nombre
            <input type="text" name="nombre" required />
          </label>
          <label>
            Tel√©fono / WhatsApp
            <input type="tel" name="telefono" required />
          </label>
          <label>
            Tipo de servicio
            <select name="tipo" required>
              <option value="mantenimiento">Mantenimiento general</option>
              <option value="ajuste">Ajuste cambios / frenos</option>
              <option value="suspension">Servicio de suspensi√≥n</option>
              <option value="asesoria">Asesor√≠a de compra</option>
            </select>
          </label>
          <button type="submit" class="btn-primary btn-full">Enviar solicitud</button>
          <p class="form__status" id="serviceStatus"></p>
        </form>
      </div>
    </div>
  </section>

  <!-- UBICACI√ìN -->
  <section class="section">
    <div class="container" style="text-align: center;">
      <h2 style="margin-bottom: 1.5rem;">Nuestra Ubicaci√≥n</h2>
      <div
        style="max-width: 800px; margin: 0 auto; border: 1px solid var(--glass-border); border-radius: 12px; overflow: hidden; box-shadow: 0 4px 20px rgba(0,0,0,0.3);">
        <iframe
          src="https://maps.google.com/maps?q=Cra%205%20%239-53%2C%20Pitalito%2C%20Huila&t=&z=17&ie=UTF8&iwloc=&output=embed"
          width="100%" height="350" style="border:0; display:block;" allowfullscreen="" loading="lazy"
          referrerpolicy="no-referrer-when-downgrade"></iframe>
      </div>
    </div>
  </section>

  <!-- PIE DE P√ÅGINA -->
  <footer class="footer" id="contacto">
    <div class="container footer__content">
      <div>
        <img src="logo-pedalazo-completo.svg" alt="El Pedalazo" style="height: 60px; margin-bottom: 1rem;">
        <p>Tu tienda de bicicletas y accesorios en l√≠nea.</p>
      </div>
      <div>
        <h4>Contacto</h4>
        <p>Cra 5 #9-53, Pitalito, Huila</p>
        <p>WhatsApp: +57 311 449 7589</p>
        <p>Email: <a href="mailto:clubpedalazo@gmail.com"
            style="text-decoration: none; color: inherit;">clubpedalazo@gmail.com</a></p>
      </div>
      <div>
        <h4>Redes</h4>
        <p>Instagram ¬∑ Facebook ¬∑ TikTok</p>
      </div>
    </div>
    <div class="footer__bottom">
      <p>&copy; 2026 Grupo Empresarial Pedalazo. Todos los derechos reservados.</p>
      <p style="font-size: 0.75rem; color: #94a3b8; margin-top: 0.5rem;">Versi√≥n 5.3.0</p>
    </div>
  </footer>


  <!-- MODAL MI CUENTA -->
  <div class="cart-modal" id="accountModal">
    <div class="cart-modal__content account-modal">
      <button class="cart-modal__close" id="closeAccount">‚úï</button>
      <div class="account-header">
        <h2>Mi Cuenta</h2>
      </div>
      <div class="account-tabs">
        <button class="account-tab active" data-tab="info">Informaci√≥n</button>
        <button class="account-tab" data-tab="orders">Pedidos</button>
        <button class="account-tab" data-tab="addresses">Direcciones</button>
        <button class="account-tab" data-tab="services">Taller üõ†Ô∏è</button>
      </div>
      <div class="account-content" id="accountInfoTab">
        <!-- JS inyecta info de usuario aqu√≠ -->
      </div>
      <div class="account-content" id="accountOrdersTab" style="display:none;">
        <h3>Historial de pedidos</h3>
        <div id="ordersList">Cargando...</div>
      </div>
      <div class="account-content" id="accountAddressesTab" style="display:none;">
        <h3>Direcciones de env√≠o</h3>
        <div id="addressesList">Cargando...</div>
        <button class="btn-secondary" id="addAddressBtn">Agregar direcci√≥n</button>
      </div>
      <div class="account-content" id="accountServicesTab" style="display:none;">
        <h3>Historial de Taller</h3>
        <div id="servicesList">Cargando...</div>
      </div>
    </div>
  </div>

  <!-- MODAL CARRITO -->
  <div class="cart-modal" id="cartModal">
    <div class="cart-modal__content">
      <button class="cart-modal__close" id="closeCart">‚úï</button>
      <h2>Carrito</h2>
      <div id="cartItems"></div>
      <div class="cart-modal__footer">
        <p>Total: <span id="cartTotal">$0</span></p>
        <button class="btn-primary btn-full" id="checkoutButton">Finalizar compra</button>
      </div>
    </div>
  </div>

  <!-- MODAL LOGIN -->
  <div class="cart-modal" id="loginModal">
    <div class="cart-modal__content login-modal">
      <button class="cart-modal__close" id="closeLogin"><i data-lucide="x"></i></button>
      <div class="login-header">
        <div class="login-logo">
          <img src="logo-pedalazo-completo.svg" alt="Pedalazo" style="height: 70px; width: auto;">
        </div>
        <h2>Iniciar Sesi√≥n</h2>
        <p>Accede a tu cuenta para gestionar productos</p>
      </div>
      <form id="loginForm" class="login-form">
        <div class="form-group">
          <label for="loginUsername">
            <i class="icon" data-lucide="user"></i> Usuario
          </label>
          <input type="text" id="loginUsername" name="username" required placeholder="Usuario o Correo" />
        </div>
        <div class="form-group">
          <label for="loginPassword">
            <i class="icon" data-lucide="lock"></i> Contrase√±a
          </label>
          <div class="password-input">
            <input type="password" id="loginPassword" name="password" required placeholder="Ingresa tu contrase√±a" />
            <button type="button" class="toggle-password" id="toggleLoginPassword">
              <i class="eye-icon" data-lucide="eye"></i>
            </button>
          </div>
        </div>
        <div class="form-options">
          <label class="checkbox-label">
            <input type="checkbox" name="remember" />
            <span class="checkmark"></span>
            Recordarme
          </label>
          <a href="#" class="forgot-password">¬øOlvidaste tu contrase√±a?</a>
        </div>
        <button type="submit" class="btn-login">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
            class="lucide lucide-log-in">
            <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4" />
            <polyline points="10 17 15 12 10 7" />
            <line x1="15" x2="3" y1="12" y2="12" />
          </svg>
          Iniciar Sesi√≥n
        </button>
        <div class="divider">
          <span>o</span>
        </div>
        <div id="googleLoginBtn" style="display: flex; justify-content: center;"></div>
        <p class="register-link">¬øNo tienes cuenta? <a href="#" id="showRegister">Reg√≠strate aqu√≠</a></p>
      </form>
    </div>
  </div>

  <!-- MODAL REGISTRO -->
  <div class="cart-modal" id="registerModal">
    <div class="cart-modal__content login-modal">
      <button class="cart-modal__close" id="closeRegister"><i data-lucide="x"></i></button>
      <div class="login-header">
        <div class="login-logo">
          <img src="logo-pedalazo-completo.svg" alt="Pedalazo" style="height: 70px; width: auto;">
        </div>
        <h2>Crear Cuenta</h2>
        <p>√önete a Grupo Empresarial Pedalazo<br>y comienza a vender</p>
      </div>
      <form id="registerForm" class="login-form">
        <div class="form-group">
          <label for="registerUsername">
            <i class="icon" data-lucide="user"></i> Usuario
          </label>
          <input type="text" id="registerUsername" name="username" required placeholder="Elige un usuario" />
        </div>
        <div class="form-group">
          <label for="registerEmail">
            <i class="icon" data-lucide="mail"></i> Correo electr√≥nico
          </label>
          <input type="email" id="registerEmail" name="email" required placeholder="Tu correo electr√≥nico" />
        </div>
        <div class="form-group">
          <label for="registerPhone">
            <i class="icon" data-lucide="smartphone"></i> Tel√©fono / Celular
          </label>
          <input type="tel" id="registerPhone" name="phone" placeholder="Ej: 3001234567" />
        </div>

        <!-- Secci√≥n de Direcci√≥n -->
        <div class="form-group">
          <label for="registerDepartment">
            <i class="icon" data-lucide="map"></i> Departamento
          </label>
          <select id="registerDepartment" name="department"
            style="width:100%; padding: 0.75rem; border-radius:10px; border:1px solid #cbd5e1; background:#fff">
            <option value="">Selecciona un departamento</option>
            <!-- JS v√≠a colombia.json -->
          </select>
        </div>
        <div class="form-group">
          <label for="registerCity">
            <i class="icon" data-lucide="building-2"></i> Ciudad
          </label>
          <select id="registerCity" name="city" disabled
            style="width:100%; padding: 0.75rem; border-radius:10px; border:1px solid #cbd5e1; background:#f1f5f9">
            <option value="">Selecciona primero un departamento</option>
          </select>
        </div>
        <div class="form-group">
          <label for="registerAddress">
            <i class="icon" data-lucide="map-pin"></i> Direcci√≥n de entrega
          </label>
          <input type="text" id="registerAddress" name="address" required placeholder="Ej: Cra 100 # 20-30" />
        </div>
        <div class="form-group">
          <label for="registerPassword">
            <i class="icon" data-lucide="lock"></i> Contrase√±a
          </label>
          <div class="password-input">
            <input type="password" id="registerPassword" name="password" required placeholder="Crea una contrase√±a" />
            <button type="button" class="toggle-password" id="toggleRegisterPassword">
              <i class="eye-icon" data-lucide="eye"></i>
            </button>
          </div>
        </div>
        <div class="form-group">
          <label for="registerConfirmPassword">
            <i class="icon" data-lucide="lock"></i> Confirmar Contrase√±a
          </label>
          <input type="password" id="registerConfirmPassword" name="confirmPassword" required
            placeholder="Repite la contrase√±a" />
        </div>
        <div class="form-options">
          <label class="checkbox-label">
            <input type="checkbox" name="terms" required />
            <span class="checkmark"></span>
            Acepto los <a href="#" class="terms-link">t√©rminos y condiciones</a>
          </label>
        </div>
        <button type="submit" class="btn-login">Crear Cuenta</button>
        <div class="divider">
          <span>o</span>
        </div>
        <div id="googleRegisterBtn" style="display: flex; justify-content: center;"></div>
        <p class="register-link">¬øYa tienes cuenta? <a href="#" id="showLogin">Inicia sesi√≥n</a></p>
      </form>
    </div>
  </div>

  <!-- MODAL AGREGAR PRODUCTO (solo para admins) -->
  <div class="cart-modal" id="addProductModal">
    <div class="cart-modal__content add-product-modal">
      <button class="cart-modal__close" id="closeAddProduct"><i data-lucide="x"></i></button>
      <h2>Agregar Nuevo Producto</h2>
      <form id="addProductForm" class="product-form">
        <div class="form-section">
          <h3>Informaci√≥n B√°sica</h3>
          <div class="form-grid">
            <div class="form-group">
              <label for="productName"><span class="icon" data-lucide="tag"></span> Nombre del Producto</label>
              <input type="text" id="productName" name="name" required placeholder="Ej: MTB Aluminio 29">
            </div>
            <div class="form-group">
              <label for="productBrand"><span class="icon" data-lucide="building"></span> Marca</label>
              <input type="text" id="productBrand" name="brand" required placeholder="Ej: Marca X">
            </div>
            <div class="form-group">
              <label for="productCategory"><span class="icon" data-lucide="folder"></span> Categor√≠a</label>
              <select id="productCategory" name="category" required>
                <option value="">Seleccionar categor√≠a</option>
                <option value="mtb">MTB</option>
                <option value="ruta">Ruta</option>
                <option value="gravel">Gravel</option>
                <option value="ciudad">Ciudad</option>
                <option value="ebike">E-Bike</option>
                <option value="accesorios">Accesorios</option>
              </select>
            </div>
            <div class="form-group">
              <label for="productPrice"><span class="icon" data-lucide="dollar-sign"></span> Precio (COP)</label>
              <input type="number" id="productPrice" name="price" required placeholder="Ej: 3500000">
            </div>
          </div>
        </div>

        <div class="form-section">
          <h3>Detalles Adicionales</h3>
          <div class="form-grid">
            <div class="form-group">
              <label for="productTag"><span class="icon" data-lucide="tag"></span> Etiqueta</label>
              <input type="text" id="productTag" name="tag" required placeholder="Ej: Novedad">
            </div>
            <div class="form-group">
              <label for="productUse"><span class="icon" data-lucide="bike"></span> Uso</label>
              <input type="text" id="productUse" name="use" required placeholder="Ej: Monta√±a">
            </div>
            <div class="form-group">
              <label for="productStock"><span class="icon" data-lucide="package"></span> Stock Inicial</label>
              <input type="number" id="productStock" name="stock" required placeholder="Ej: 10">
            </div>
          </div>
          <!-- Campo de C√≥digo de Barras -->
          <div class="form-group" style="margin-top: 1rem;">
            <label for="productBarcode"><span class="icon" data-lucide="barcode"></span> C√≥digo de Barras</label>
            <input type="text" id="productBarcode" name="barcode" placeholder="Escanea o escribe el c√≥digo">
          </div>
        </div>

        <div class="form-section">
          <h3><span class="icon" data-lucide="image"></span> Im√°genes del Producto (M√°x 4)</h3>
          <div class="image-upload-grid" id="imageUploadGrid">
            <!-- Espacios generados por JS -->
            <div class="image-slot" data-index="0">
              <input type="file" accept="image/*">
              <div class="slot-placeholder">
                <i data-lucide="image-plus" style="width:24px; height:24px;"></i>
                <p style="font-size: 0.8rem">Principal</p>
              </div>
            </div>
            <div class="image-slot" data-index="1">
              <input type="file" accept="image/*">
              <div class="slot-placeholder">
                <i data-lucide="plus" style="width:24px; height:24px;"></i>
              </div>
            </div>
            <div class="image-slot" data-index="2">
              <input type="file" accept="image/*">
              <div class="slot-placeholder">
                <i data-lucide="plus" style="width:24px; height:24px;"></i>
              </div>
            </div>
            <div class="image-slot" data-index="3">
              <input type="file" accept="image/*">
              <div class="slot-placeholder">
                <i data-lucide="plus" style="width:24px; height:24px;"></i>
              </div>
            </div>
          </div>

          <div class="form-actions">
            <button type="button" class="btn-secondary" id="cancelAddProduct">Cancelar</button>
            <button type="submit" class="btn-primary">Agregar Producto</button>
          </div>
        </div>

    </div>
    </form>
  </div>
  </div>

  <!-- Tablero de Admin eliminado (Movido a admin.html) -->

  <!-- Bot√≥n de WhatsApp -->
  <a href="https://wa.me/573000000000" class="whatsapp-float" target="_blank" title="Contactar por WhatsApp">
    <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp">
  </a>
  <style>
    .whatsapp-float {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      background: #25D366;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 14px rgba(0, 0, 0, 0.25);
      z-index: 1000;
      transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    .whatsapp-float:hover {
      transform: scale(1.1);
    }

    .whatsapp-float img {
      width: 35px;
      height: 35px;
      filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.1));
    }
  </style>

  <!-- Module type for imports -->
  <script type="module" src="app.js?v=5.3.4"></script>
</body>

</html>