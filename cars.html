<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <title>JDAUTOPARTES - Repuestos Automotrices</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="stylesheet" href="style.css?v=14.3.0" />
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* Estilos específicos para carros */
        .hero-car {
            /* Fondo urbano colombiano/taller sugiere repuestos */
            background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), url('https://images.unsplash.com/photo-1486262715619-67b85e0b08d3?auto=format&fit=crop&q=80');
            background-size: cover;
            background-position: center;
            height: 50vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: white;
            margin-top: -80px;
            padding-top: 80px;
        }

        .car-category-card {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-md);
            padding: 1.5rem;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.8rem;
        }

        .car-category-card:hover,
        .car-category-card.active {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(59, 130, 246, 0.2);
            border-color: #3b82f6;
            background: rgba(59, 130, 246, 0.1);
        }

        .car-brand-logo {
            font-weight: 800;
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            color: white;
        }

        .viewer-loader {
            font-family: 'Inter', sans-serif;
            color: var(--text-muted);
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% {
                opacity: 0.5;
            }

            50% {
                opacity: 1;
            }

            100% {
                opacity: 0.5;
            }
        }
    </style>
</head>

<body>
    <!-- CABECERA -->
    <header class="header">
        <div class="container header__content">
            <div class="logo">
                <a href="index.html" style="text-decoration: none; display: flex; align-items: center;">
                    <!-- <img src="logo-pedalazo-icon.svg" alt="JDAUTOPARTES" style="height: 50px; width: auto;"> -->
                    <span
                        style="font-size: 1.8rem; font-weight: 800; color: white; letter-spacing: -1px; font-family: 'Inter', sans-serif;">JDAUTOPARTES</span>
                </a>
            </div>

            <nav class="nav" id="mainNav">
                <a href="index.html">Inicio</a>
                <a href="index.html#categorias">Bicicletas</a>
                <a href="javascript:void(0)" class="nav-highlight active">
                    Para tu carro!
                    <span class="nav-badge">NEW</span>
                </a>
                <a href="index.html#servicios">Servicios</a>
                <a href="index.html#contacto">Contacto</a>
            </nav>

            <div class="header__actions">
                <button class="btn-icon" id="cartButton">
                    <i data-lucide="shopping-bag"></i> <span id="cartCount">0</span>
                </button>
                <a href="index.html" class="btn-secondary" style="padding: 0.5rem 1rem; font-size: 0.8rem;">Volver a
                    Tienda</a>
            </div>
        </div>
    </header>

    <!-- HERO CARROS -->
    <section class="hero-car">
        <div class="container">
            <h1 style="font-size: 3.5rem; margin-bottom: 1rem; text-shadow: 0 4px 10px rgba(0,0,0,0.5);">Repuestos
                Comerciales</h1>
            <p style="font-size: 1.2rem; max-width: 600px; margin: 0 auto;">Todo para los vehículos más vendidos en
                Colombia. Spark, Logan, Picanto y más.</p>
        </div>
    </section>

    <!-- FILTRADO POR MARCA/MODELO -->
    <section class="section">
        <div class="container">
            <h2>Busca por tu carro</h2>
            <div class="grid" style="grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); margin-top: 2rem;">

                <article class="car-category-card" onclick="filterLocal('Chevrolet')">
                    <div class="car-brand-logo" style="color:#fbbf24;">Chevrolet</div> <!-- Dorado Chevrolet (aprox) -->
                    <p class="text-xs text-muted">Spark GT, Sail, Onix, Tracker</p>
                </article>

                <article class="car-category-card" onclick="filterLocal('Renault')">
                    <div class="car-brand-logo" style="color:#facc15;">Renault</div> <!-- Amarillo Renault -->
                    <p class="text-xs text-muted">Logan, Sandero, Duster, Kwid</p>
                </article>

                <article class="car-category-card" onclick="filterLocal('Kia')">
                    <div class="car-brand-logo" style="color:#ef4444;">Kia</div> <!-- Rojo Kia -->
                    <p class="text-xs text-muted">Picanto Ion/GT, Rio, Sportage</p>
                </article>

                <article class="car-category-card" onclick="filterLocal('Mazda')">
                    <div class="car-brand-logo" style="color:#d1d5db;">Mazda</div> <!-- Plateado -->
                    <p class="text-xs text-muted">Mazda 2, 3, CX-30, CX-5</p>
                </article>

                <article class="car-category-card" onclick="filterLocal('Nissan')">
                    <div class="car-brand-logo" style="color:#ef4444;">Nissan</div>
                    <p class="text-xs text-muted">March, Versa, Kicks</p>
                </article>

                <article class="car-category-card" onclick="filterLocal('Taxi')">
                    <div class="car-brand-logo" style="color:#fbbf24;">Taxis / SP</div>
                    <p class="text-xs text-muted">Zapaticos, Cronos, Twingo</p>
                </article>

            </div>
        </div>
    </section>

    <!-- PRODUCTOS CARROS DINÁMICOS -->
    <section class="section" style="background: var(--bg-surface); min-height: 400px;">
        <div class="container">
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <h2 id="productsTitle">Todos los Repuestos</h2>
                <button id="resetFilterBtn" onclick="resetFilter()" class="btn-secondary"
                    style="display:none; font-size:0.8rem; padding: 0.4rem 0.8rem;">Ver Todos</button>
            </div>

            <div class="grid productos__grid" id="carProductsList" style="margin-top: 2rem;">
                <div class="viewer-loader" style="grid-column: 1/-1; text-align: center; padding: 3rem;">
                    Cargando inventario...
                </div>
            </div>

            <div id="noProductsMsg" style="display:none; text-align: center; margin-top: 3rem;">
                <p class="text-muted">No encontramos repuestos específicos para este filtro por ahora.</p>
                <button class="btn-secondary" onclick="resetFilter()" style="margin-top:1rem;">Ver todo el
                    inventario</button>
            </div>
        </div>
    </section>

    <!-- UBICACIÓN & CONTACTO DETALLADO -->
    <section class="section">
        <div class="container">
            <div class="grid"
                style="grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 3rem; align-items: center;">

                <!-- Info Side -->
                <div class="contact-info">
                    <h2 style="margin-bottom: 1rem; font-size: 2.5rem;">Visítanos</h2>
                    <p class="text-muted" style="margin-bottom: 2rem; font-size: 1.1rem;">
                        Estamos ubicados en el corazón de Pitalito. Encuentra el repuesto exacto para tu vehículo.
                    </p>

                    <div style="display: flex; flex-direction: column; gap: 1.5rem;">
                        <div style="display: flex; gap: 1rem; align-items: flex-start;">
                            <div
                                style="background: rgba(59, 130, 246, 0.1); padding: 0.8rem; border-radius: 12px; color: #3b82f6; display: flex; align-items: center; justify-content: center;">
                                <i data-lucide="map-pin" style="width: 24px; height: 24px;"></i>
                            </div>
                            <div>
                                <h4 style="margin: 0 0 0.2rem 0; font-weight: 700;">Dirección</h4>
                                <p style="margin: 0; color: var(--text-muted);">Cra 5 #9-53, Centro</p>
                                <p style="margin: 0; color: var(--text-muted);">Pitalito, Huila</p>
                            </div>
                        </div>

                        <div style="display: flex; gap: 1rem; align-items: flex-start;">
                            <div
                                style="background: rgba(59, 130, 246, 0.1); padding: 0.8rem; border-radius: 12px; color: #3b82f6; display: flex; align-items: center; justify-content: center;">
                                <i data-lucide="clock" style="width: 24px; height: 24px;"></i>
                            </div>
                            <div>
                                <h4 style="margin: 0 0 0.2rem 0; font-weight: 700;">Horario de Atención</h4>
                                <p style="margin: 0; color: var(--text-muted);">Lunes - Sábado: 8:00 AM - 7:00 PM</p>
                                <p style="margin: 0; color: var(--text-muted);">Domingos: 9:00 AM - 1:00 PM</p>
                            </div>
                        </div>

                        <div style="display: flex; gap: 1rem; align-items: flex-start;">
                            <div
                                style="background: rgba(59, 130, 246, 0.1); padding: 0.8rem; border-radius: 12px; color: #3b82f6; display: flex; align-items: center; justify-content: center;">
                                <i data-lucide="phone" style="width: 24px; height: 24px;"></i>
                            </div>
                            <div>
                                <h4 style="margin: 0 0 0.2rem 0; font-weight: 700;">Contacto</h4>
                                <p style="margin: 0; color: var(--text-muted);">+57 311 449 7589</p>
                                <a href="https://wa.me/573114497589" target="_blank"
                                    style="color: #3b82f6; text-decoration: none; font-weight: 600; font-size: 0.9rem;">Enviar
                                    mensaje →</a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Map Side -->
                <div class="map-wrapper"
                    style="border-radius: 20px; overflow: hidden; box-shadow: 0 20px 40px rgba(0,0,0,0.3); border: 1px solid var(--glass-border); height: 450px; position: relative;">
                    <iframe
                        src="https://maps.google.com/maps?q=Cra%205%20%239-53%2C%20Pitalito%2C%20Huila&t=&z=17&ie=UTF8&iwloc=&output=embed"
                        width="100%" height="100%" style="border:0; display:block;" allowfullscreen="" loading="lazy"
                        referrerpolicy="no-referrer-when-downgrade"></iframe>

                    <!-- Badge -->
                    <div
                        style="position: absolute; bottom: 20px; right: 20px; background: white; padding: 0.5rem 1rem; border-radius: 50px; box-shadow: 0 4px 12px rgba(0,0,0,0.2); display: flex; align-items: center; gap: 0.5rem; font-weight: 600; font-size: 0.9rem; color: #0f172a;">
                        <span style="width: 10px; height: 10px; background: #22c55e; border-radius: 50%;"></span>
                        Abierto Ahora
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- PIE DE PÁGINA -->
    <footer class="footer">
        <div class="container footer__content">
            <div>
                <h3 style="color:white; font-weight:800;">JDAUTOPARTES</h3>
                <p>Expertos en repuestos y accesorios automotrices.</p>
            </div>
            <div>
                <h4>Contacto</h4>
                <p>Cra 5 #9-53, Pitalito, Huila</p>
                <p>WhatsApp: +57 311 449 7589</p>
            </div>
            <div>
                <h4>Redes</h4>
                <p>Instagram · Facebook · TikTok</p>
            </div>
        </div>
        <div class="footer__bottom">
            <p>&copy; 2026 JDAUTOPARTES. Todos los derechos reservados.</p>
        </div>
    </footer>

    <script>
        lucide.createIcons();

        const API_BASE = 'api/products.php';
        let allCarProducts = [];

        // Palabras clave extendidas para Colombia
        const carKeywords = [
            'automotriz', 'carro', 'coche', 'vehiculo',
            'chevrolet', 'spark', 'sail', 'onix', 'tracker',
            'renault', 'logan', 'sandero', 'duster', 'kwid', 'stepway',
            'kia', 'picanto', 'rio', 'sportage',
            'mazda', 'cx-30', 'cx-5',
            'nissan', 'march', 'versa',
            'taxi', 'hyundai', 'i10', 'atos', 'grand i10'
        ];

        async function fetchCarProducts() {
            const container = document.getElementById('carProductsList');
            try {
                const res = await fetch(API_BASE);
                const data = await res.json();

                if (data.success && Array.isArray(data.products)) {

                    allCarProducts = data.products.filter(p => {
                        const cat = (p.category || '').toLowerCase();
                        const name = (p.name || '').toLowerCase();
                        const brand = (p.brand || '').toLowerCase();

                        // Verificar si coincide con alguna keyword de carro
                        return carKeywords.some(k => cat.includes(k) || name.includes(k) || brand.includes(k));
                    });

                    renderCarProducts(allCarProducts);
                } else {
                    container.innerHTML = '<p class="text-muted" style="grid-column:1/-1; text-align:center;">Inventario vacio.</p>';
                }
            } catch (e) {
                console.error("Error al cargar productos", e);
                container.innerHTML = '<p style="text-align:center; color:red; grid-column:1/-1;">Error de conexión.</p>';
            }
        }

        function renderCarProducts(products) {
            const container = document.getElementById('carProductsList');
            const noMsg = document.getElementById('noProductsMsg');

            if (!products || products.length === 0) {
                container.innerHTML = '';
                noMsg.style.display = 'block';
                return;
            }

            noMsg.style.display = 'none';
            container.innerHTML = products.map(p => {
                const imagePath = (p.images && p.images.length > 0) ? p.images[0] : '';
                const finalImg = imagePath.startsWith('http') || imagePath.startsWith('data:') ? imagePath : `api/../${imagePath}`;

                return `
            <article class="card product-card">
                <div class="product-card__image">
                    ${imagePath
                        ? `<img src="${finalImg}" alt="${p.name}" style="width:100%; height:100%; object-fit:cover;" onerror="this.onerror=null;this.parentNode.innerHTML='<div class=\\'product-card__image-placeholder\\'>${p.name}</div>'">`
                        : `<div class="product-card__image-placeholder" style="background: linear-gradient(135deg, #1e293b, #334155);">${p.name}</div>`
                    }
                </div>
                <div class="product-card__brand">${p.brand || p.category || 'Repuesto'}</div>
                <h3 class="product-card__title">${p.name}</h3>
                <div class="product-card__meta">
                    <span class="product-card__price">$${Number(p.price).toLocaleString()}</span>
                    ${p.tag ? `<span class="product-card__tag">${p.tag}</span>` : ''}
                </div>
                <div class="product-card__actions">
                    <button class="btn-primary btn-full" onclick="window.location.href='index.html#contacto'" title="Cotizar">
                        Cotizar
                    </button>
                </div>
            </article>
        `}).join('');
            lucide.createIcons();
        }

        function filterLocal(term) {
            const resetBtn = document.getElementById('resetFilterBtn');
            const title = document.getElementById('productsTitle');

            // Highlight active card
            document.querySelectorAll('.car-category-card').forEach(c => c.classList.remove('active'));
            // Find card that was clicked (approximate)
            // logic handled by UI feedback mostly, simple here.

            if (!term) {
                renderCarProducts(allCarProducts);
                resetBtn.style.display = 'none';
                title.textContent = "Todos los Repuestos";
                return;
            }

            title.textContent = `Repuestos para ${term}`;
            const t = term.toLowerCase();

            const filtered = allCarProducts.filter(p => {
                const cat = (p.category || '').toLowerCase();
                const name = (p.name || '').toLowerCase();
                const brand = (p.brand || '').toLowerCase();

                // Comprobaciones específicas para "Taxi" que pueden ser varias marcas
                if (t === 'taxi') {
                    return cat.includes('taxi') || name.includes('taxi') || name.includes('zapatico') || name.includes('atos') || name.includes('cronos');
                }

                return cat.includes(t) || name.includes(t) || brand.includes(t);
            });

            renderCarProducts(filtered);
            resetBtn.style.display = 'block';

            document.getElementById('carProductsList').scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        function resetFilter() {
            renderCarProducts(allCarProducts);
            document.getElementById('resetFilterBtn').style.display = 'none';
            document.getElementById('productsTitle').textContent = "Todos los Repuestos";
            document.querySelectorAll('.car-category-card').forEach(c => c.classList.remove('active'));
        }

        document.addEventListener('DOMContentLoaded', fetchCarProducts);
    </script>
</body>

</html>