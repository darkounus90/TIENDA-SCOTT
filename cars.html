<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <title>Accesorios para Carro - Grupo Empresarial El Pedalazo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    <link rel="stylesheet" href="style.css?v=14.3.0" />
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* Estilos específicos para la sección de carros */
        .hero-car {
            background: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('https://images.unsplash.com/photo-1492144534655-ae79c964c9d7?auto=format&fit=crop&q=80');
            background-size: cover;
            background-position: center;
            height: 60vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: white;
            margin-top: -80px;
            padding-top: 80px;
        }

        .car-category-card {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-md);
            padding: 2rem;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
        }

        .car-category-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(168, 85, 247, 0.2);
            /* Lila glow */
            border-color: #a855f7;
        }

        .car-category-icon {
            width: 60px;
            height: 60px;
            background: rgba(168, 85, 247, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #a855f7;
            font-size: 1.5rem;
        }

        .viewer-loader {
            font-family: 'Inter', sans-serif;
            color: var(--text-muted);
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% {
                opacity: 0.5;
            }

            50% {
                opacity: 1;
            }

            100% {
                opacity: 0.5;
            }
        }
    </style>
</head>

<body>
    <!-- CABECERA -->
    <header class="header">
        <div class="container header__content">
            <div class="logo">
                <a href="index.html" style="text-decoration: none; display: flex; align-items: center;">
                    <img src="logo-pedalazo-icon.svg" alt="El Pedalazo" style="height: 50px; width: auto;">
                    <span
                        style="font-size: 2rem; font-weight: 800; color: white; margin-left: -10px; letter-spacing: -1px; font-family: 'Inter', sans-serif;">edalazo</span>
                </a>
            </div>

            <nav class="nav" id="mainNav">
                <a href="index.html">Inicio</a>
                <a href="index.html#categorias">Bicicletas</a>
                <a href="javascript:void(0)" class="nav-highlight active">
                    Para tu carro!
                    <span class="nav-badge">NEW</span>
                </a>
                <a href="index.html#servicios">Servicios</a>
                <a href="index.html#contacto">Contacto</a>
            </nav>

            <div class="header__actions">
                <button class="btn-icon" id="cartButton">
                    <i data-lucide="shopping-bag"></i> <span id="cartCount">0</span>
                </button>
                <a href="index.html" class="btn-secondary" style="padding: 0.5rem 1rem; font-size: 0.8rem;">Volver a
                    Tienda</a>
            </div>
        </div>
    </header>

    <!-- HERO CARROS -->
    <section class="hero-car">
        <div class="container">
            <h1 style="font-size: 3.5rem; margin-bottom: 1rem; text-shadow: 0 4px 10px rgba(0,0,0,0.5);">Auto Parts
                Premium</h1>
            <p style="font-size: 1.2rem; max-width: 600px; margin: 0 auto;">Equipa tu vehículo con los mejores
                accesorios y repuestos. Calidad garantizada por El Pedalazo.</p>
        </div>
    </section>

    <!-- CATEGORÍAS CARROS -->
    <section class="section">
        <div class="container">
            <h2>Categorías Automotriz</h2>
            <div class="grid" style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); margin-top: 2rem;">

                <article class="car-category-card" onclick="filterLocal('Interiores')">
                    <div class="car-category-icon"><i data-lucide="car"></i></div>
                    <h3>Interiores</h3>
                    <p>Tapetes, fundas y confort</p>
                </article>

                <article class="car-category-card" onclick="filterLocal('Audio')">
                    <div class="car-category-icon"><i data-lucide="music"></i></div>
                    <h3>Audio y Video</h3>
                    <p>Radios, parlantes y pantallas</p>
                </article>

                <article class="car-category-card" onclick="filterLocal('Herramientas')">
                    <div class="car-category-icon"><i data-lucide="wrench"></i></div>
                    <h3>Herramientas</h3>
                    <p>Kits de carretera y limpieza</p>
                </article>

                <article class="car-category-card" onclick="filterLocal('Iluminación')">
                    <div class="car-category-icon"><i data-lucide="lightbulb"></i></div>
                    <h3>Iluminación</h3>
                    <p>Luces LED, exploradoras y más</p>
                </article>

                <article class="car-category-card" onclick="filterLocal('Seguridad')">
                    <div class="car-category-icon"><i data-lucide="shield"></i></div>
                    <h3>Seguridad</h3>
                    <p>Alarmas, bloqueos y cámaras</p>
                </article>

            </div>
        </div>
    </section>

    <!-- PRODUCTOS CARROS DINÁMICOS -->
    <section class="section" style="background: var(--bg-surface); min-height: 400px;">
        <div class="container">
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <h2>Productos Destacados</h2>
                <button id="resetFilterBtn" onclick="resetFilter()" class="btn-secondary"
                    style="display:none; font-size:0.8rem; padding: 0.4rem 0.8rem;">Ver Todos</button>
            </div>

            <div class="grid productos__grid" id="carProductsList" style="margin-top: 2rem;">
                <div class="viewer-loader" style="grid-column: 1/-1; text-align: center; padding: 3rem;">
                    Cargando inventario automotriz...
                </div>
            </div>

            <div id="noProductsMsg" style="display:none; text-align: center; margin-top: 3rem;">
                <p class="text-muted">No se encontraron productos en esta categoría por el momento.</p>
                <button class="btn-secondary" onclick="resetFilter()" style="margin-top:1rem;">Ver otros
                    productos</button>
            </div>
        </div>
    </section>

    <!-- PIE DE PÁGINA -->
    <footer class="footer">
        <div class="container footer__content">
            <div>
                <img src="logo-pedalazo-completo.svg" alt="El Pedalazo" style="height: 60px; margin-bottom: 1rem;">
                <p>Tu tienda de bicicletas y accesorios en línea.</p>
            </div>
            <div>
                <h4>Contacto</h4>
                <p>Pitalito, Huila - Colombia</p>
                <p>WhatsApp: +57 311 449 7589</p>
            </div>
            <div>
                <h4>Redes</h4>
                <p>Instagram · Facebook · TikTok</p>
            </div>
        </div>
        <div class="footer__bottom">
            <p>&copy; 2026 Grupo Empresarial El Pedalazo. Todos los derechos reservados.</p>
        </div>
    </footer>

    <script>
        // Inicializar Iconos
        lucide.createIcons();

        // Lógica para cargar productos de carros
        const API_BASE = 'api/products.php';
        let allCarProducts = [];

        async function fetchCarProducts() {
            const container = document.getElementById('carProductsList');
            try {
                const res = await fetch(API_BASE);
                const data = await res.json();

                if (data.success && Array.isArray(data.products)) {
                    // Filtrar solo categorías de autos
                    allCarProducts = data.products.filter(p => {
                        const cat = (p.category || '').toLowerCase();
                        const name = (p.name || '').toLowerCase();
                        // Palabras clave para identificar productos de autos
                        return cat.includes('automotriz') || cat.includes('carro') || cat.includes('coche') || cat.includes('vehiculo') ||
                            name.includes('automotriz') || name.includes('carro');
                    });
                    renderCarProducts(allCarProducts);
                } else {
                    container.innerHTML = '<p class="text-muted" style="grid-column:1/-1; text-align:center;">No se pudo cargar el inventario.</p>';
                }
            } catch (e) {
                console.error("Error al cargar productos", e);
                container.innerHTML = '<p style="text-align:center; color:red; grid-column:1/-1;">Error de conexión. Intenta recargar la página.</p>';
            }
        }

        function renderCarProducts(products) {
            const container = document.getElementById('carProductsList');
            const noMsg = document.getElementById('noProductsMsg');

            if (!products || products.length === 0) {
                container.innerHTML = '';
                noMsg.style.display = 'block';
                return;
            }

            noMsg.style.display = 'none';
            container.innerHTML = products.map(p => {
                const imagePath = (p.images && p.images.length > 0) ? p.images[0] : '';
                // Asegurar ruta correcta si no empieza con http
                const finalImg = imagePath.startsWith('http') || imagePath.startsWith('data:') ? imagePath : `api/../${imagePath}`;

                return `
            <article class="card product-card">
                <div class="product-card__image">
                    ${imagePath
                        ? `<img src="${finalImg}" alt="${p.name}" style="width:100%; height:100%; object-fit:cover;" onerror="this.onerror=null;this.parentNode.innerHTML='<div class=\\'product-card__image-placeholder\\'>${p.name}</div>'">`
                        : `<div class="product-card__image-placeholder" style="background: linear-gradient(135deg, #1e293b, #334155);">${p.name}</div>`
                    }
                </div>
                <div class="product-card__brand">${p.brand || 'El Pedalazo'}</div>
                <h3 class="product-card__title">${p.name}</h3>
                <div class="product-card__meta">
                    <span class="product-card__price">$${Number(p.price).toLocaleString()}</span>
                    ${p.tag ? `<span class="product-card__tag">${p.tag}</span>` : ''}
                </div>
                <div class="product-card__actions">
                    <button class="btn-primary btn-full" onclick="window.location.href='index.html#contacto'" title="Consultar disponibilidad">
                        Consultar
                    </button>
                </div>
            </article>
        `}).join('');
            lucide.createIcons();
        }

        function filterLocal(term) {
            const resetBtn = document.getElementById('resetFilterBtn');
            if (!term) {
                renderCarProducts(allCarProducts);
                resetBtn.style.display = 'none';
                return;
            }

            const filtered = allCarProducts.filter(p => {
                const cat = (p.category || '').toLowerCase();
                const name = (p.name || '').toLowerCase();
                const t = term.toLowerCase();
                return cat.includes(t) || name.includes(t);
            });

            renderCarProducts(filtered);
            resetBtn.style.display = 'block';

            // Scroll to products
            document.getElementById('carProductsList').scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        function resetFilter() {
            renderCarProducts(allCarProducts);
            document.getElementById('resetFilterBtn').style.display = 'none';
        }

        // Iniciar carga
        document.addEventListener('DOMContentLoaded', fetchCarProducts);
    </script>
</body>

</html>